<!DOCTYPE html>
<div id="container"></div>
<script src="d3.js"></script>
<script type="module">

const margin = { top: 20, right: 20, bottom: 30, left: 40 };
const width = 500 - margin.left - margin.right;
const height = 300 - margin.top - margin.bottom;

const svg = d3.select('body')
  .append('svg')
  .attr('width', width + margin.left + margin.right)
  .attr('height', height + margin.top + margin.bottom)
  .append('g')
  .attr('transform', `translate(${margin.left}, ${margin.top})`);

d3.csv('data.csv')
  .then(data => {
    console.log(data);

    // Convert string values to numbers
    data.forEach(d => {
      d['Taux de pauvreté'] = +d['Taux de pauvreté'];
      d['Part de la population éloignée des équipements de proximité'] = +d['Part de la population éloignée des équipements de proximité'];
    });

    // Create scales
    const xScale = d3.scaleLinear()
      .domain([d3.min(data, d => d['Part de la population éloignée des équipements de proximité']), d3.max(data, d => d['Part de la population éloignée des équipements de proximité'])])
      .range([0, width]);

    const yScale = d3.scaleLinear()
      .domain([d3.min(data, d => d['Taux de pauvreté']), d3.max(data, d => d['Taux de pauvreté'])])
      .range([height, 0]);

    // Create axes
    svg.append('g')
      .attr('transform', `translate(0, ${height})`)
      .call(d3.axisBottom(xScale));

    svg.append('g')
      .call(d3.axisLeft(yScale));

    // Draw circles
    svg.selectAll('circle')
      .data(data)
      .enter()
      .append('circle')
      .attr('cx', d => xScale(d['Part de la population éloignée des équipements de proximité']))
      .attr('cy', d => yScale(d['Taux de pauvreté']))
      .attr('r', 5);
  })
  .catch(error => {
    console.error('Error loading CSV:', error);
  });

</script>
